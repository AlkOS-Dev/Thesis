\documentclass[a4paper,11pt,twoside]{report}

% ----------------------   PREAMBLE PART ------------------------------

% ------------------------ ENCODING & LANGUAGES ----------------------

\usepackage[utf8]{inputenc}
\usepackage[MeX]{polski}
\usepackage[T1]{fontenc}
\usepackage[english, polish]{babel}


\usepackage{amsmath, amsfonts, amsthm, latexsym}

\usepackage[final]{pdfpages}
\usepackage[backend=bibtex, style=verbose-trad2]{biblatex}


\usepackage{commath}

\usepackage[hidelinks]{hyperref}


% ---------------- MARGINS, INDENTATION, LINESPREAD ------------------

\usepackage[inner=20mm, outer=20mm, bindingoffset=10mm, top=25mm, bottom=25mm]{geometry}


\linespread{1.5}
\allowdisplaybreaks

\usepackage{indentfirst}
\setlength{\parindent}{5mm}


%---------------- RUNNING HEAD - CHAPTER NAMES, PAGE NUMBERS ETC. -------------------

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[LE,RO]{\thepage} 
\fancyhead[LO]{\sc \nouppercase{\rightmark}}
\fancyhead[RE]{\sc \leftmark}

\renewcommand{\chaptermark}[1]{\markboth{\thechapter.\ #1}{}}

\renewcommand{\headrulewidth}{0 pt}


\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[LE,RO]{\thepage}
  
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.0pt}
}



% --------------------------- CHAPTER HEADERS ---------------------

\usepackage{titlesec}
\titleformat{\chapter}
  {\normalfont\Large \bfseries}
  {\thechapter.}{1ex}{\Large}

\titleformat{\section}
  {\normalfont\large\bfseries}
  {\thesection.}{1ex}{}
\titlespacing{\section}{0pt}{30pt}{20pt} 

    
\titleformat{\subsection}
  {\normalfont \bfseries}
  {\thesubsection.}{1ex}{}


% ----------------------- TABLE OF CONTENTS SETUP ---------------------------

\def\cleardoublepage{\clearpage\if@twoside
\ifodd\c@page\else\hbox{}\thispagestyle{empty}\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}


\usepackage{etoolbox}
\makeatletter
\patchcmd{\l@chapter}
  {\hfil}
  {\leaders\hbox{\normalfont$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill}
  {}{}
\makeatother

\usepackage{titletoc}
\makeatletter
\titlecontents{chapter}
  [0pt]
  {}
  {\bfseries \thecontentslabel.\quad}
  {\bfseries}
  {\bfseries\leaders\hbox{\normalfont$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill\contentspage}

\titlecontents{section}
  [1em]
  {}
  {\thecontentslabel.\quad}
  {}
  {\leaders\hbox{\normalfont$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill\contentspage}

\titlecontents{subsection}
  [2em]
  {}
  {\thecontentslabel.\quad}
  {}
  {\leaders\hbox{\normalfont$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill\contentspage}
\makeatother



% ---------------------- TABLES AD FIGURES NUMBERING ----------------------

\renewcommand*{\thetable}{\arabic{chapter}.\arabic{table}}
\renewcommand*{\thefigure}{\arabic{chapter}.\arabic{figure}}


% ------------- DEFINING ENVIRONMENTS FOR THEOREMS, DEFINITIONS ETC. ---------------

\makeatletter
\newtheoremstyle{definition}
{3ex}
{3ex}
{\upshape}
{}
{\bfseries}
{.}
{.5em}
{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
\makeatother

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{example}[theorem]{Example}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}

% --------------------- END OF PREAMBLE PART (MOSTLY) --------------------------





% -------------------------- USER SETTINGS ---------------------------

\newcommand{\tytul}{Funkcjonalne jądro systemu operacyjnego: AlkOS}
\renewcommand{\title}{From Bare Metal to a Functional Kernel: The AlkOS Operating System}
\newcommand{\type}{Engineer}
\newcommand{\supervisor}{mgr inż. Paweł Sobótka}



\begin{document}
\sloppy
\selectlanguage{english}

\includepdf[pages=-]{titlepage-en}

\null\thispagestyle{empty}\newpage

% ------------------ PAGE WITH SIGNATURES --------------------------------

%\thispagestyle{empty}\newpage
%\null
%
%\vfill
%
%\begin{center}
%\begin{tabular}[t]{ccc}
%............................................. & \hspace*{100pt} & .............................................\\
%supervisor's signature & \hspace*{100pt} & author's signature
%\end{tabular}
%\end{center}
%


% ---------------------------- ABSTRACT -----------------------------

{  \fontsize{12}{14} \selectfont
\begin{abstract}

\begin{center}
\title
\end{center}

TODO

\end{abstract}
}

\null\thispagestyle{empty}\newpage

%% --------------------------- DECLARATIONS ------------------------------------
%
%%
%%	IT IS NECESSARY OT ATTACH FILLED-OUT AUTORSHIP DEECLRATION. SCAN (IN PDF FORMAT) NEEDS TO BE PLACED IN scans FOLDER AND IT SHOULD BE CALLED, FOR EXAMPLE, DECLARATION_OF_AUTORSHIP.PDF. IF THE FILENAME OR FILEPATH IS DIFFERENT, THE FILEPATH IN THE NEXT COMMAND HAS TO BE ADJUSTED ACCORDINGLY.
%%
%%	command attacging the declarations of autorship
%%
%\includepdf[pages=-]{scans/declaration-of-autorship}
%\null\thispagestyle{empty}\newpage
%
%% optional declaration
%%
%%	command attaching the declaataration on granting a license
%%
%\includepdf[pages=-]{scans/declaration-on-granting-a-license}
%%
%%	.tex corresponding to the above PDF files are present in the 3. declarations folder 
%
\null\thispagestyle{empty}\newpage
% ------------------- TABLE OF CONTENTS ---------------------
\selectlanguage{english}
\pagenumbering{gobble}
\tableofcontents
\thispagestyle{empty}
\newpage % IF YOU HAVE EVEN QUANTITY OD PAGES OF TOC, THEN REMOVE IT OR ADD \null\newpage FOR DOUBLE BLANK PAGE BEFORE INTRODUCTION


% -------------------- THE BODY OF THE THESIS --------------------------------

\null\thispagestyle{empty}\newpage
\pagestyle{fancy}
\pagenumbering{arabic}
\setcounter{page}{11}


\chapter{Introduction}
\markboth{}{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

\section{Theoretical Background} % krotkie opisy wszystkie co to scheduler proces etc...
TODO
\section{Scope of the thesis} % co chcemy osiagnac 
TODO
\section{Archieved functionalities} % co osiagnelismy
TODO
\section{Work division - code} 
TODO
\section{Work division - thesis}
TODO

% ==================================================================

\chapter{Creating an Operating System from scratch}

% Tutorial jak zrobic os krok po kroku tak zeby kazdy zrozumial pozdro

\section{Host Environment}
TODO
\subsection{Cross-Compilation toolchain}
TODO
\subsection{Building machinery}
TODO
\subsection{Emulation}
TODO
\subsection{Rootfs}
TODO
\subsection{Compiling userspace programs}
TODO
\subsection{Testing}
TODO

\section{Target Environment}
TODO
\subsection{Implementation of libc and libc++}
TODO
\subsection{Bootloader}
TODO
\subsection{Memory preloading and discovery}
TODO
\subsection{Discovering and enabling cpu features}
TODO
\subsection{Enabling Interrupts and Exceptions}
TODO
\subsection{Memory managment}
TODO

\subsubsection{Physical memory management}
TODO
\subsubsection{Virtual memory management}
TODO
\subsubsection{Virtual address space}
TODO

\subsection{Discovering external devices and system capabilities}
TODO

\subsubsection{Clocks}
TODO
\subsubsection{Event clocks}
TODO

\subsection{File systems}
TODO
\subsection{Screen drawing}
TODO
\subsection{Scheduling}
TODO

\subsubsection{Process}
TODO
\subsubsection{Thread}
TODO
\subsubsection{Meta-scheduler}
TODO
\subsubsection{Policies}
TODO
\subsubsection{Context switch}
TODO
\subsubsection{Context conversion}
TODO

\subsection{User space}
TODO

\subsubsection{Syscalls}
TODO
\subsubsection{Libc system headers}
TODO
\subsubsection{Conversion to user space}
TODO
\subsubsection{Loading elf64}
TODO
\subsubsection{Shell}
TODO


% ==================================================================

% jak to robia inni, same najwazniejsze elementy

\chapter{Analysis of Existing Solutions}

\section{Linux}
TODO

\subsection{Scheduler}
TODO
\subsection{Timing}
TODO
\subsection{Memory management}
TODO
\subsection{System interface}
TODO

\section{Minix}
TODO

\subsection{Scheduler}
TODO
\subsection{Timing}
TODO
\subsection{Memory management}
TODO
\subsection{System interface}
TODO

% ==================================================================

\chapter{Supporting multiple hardwares} % opis problemu i jego rozmiaru
TODO

\section{HAL - Hardware Abstraction Level} % jak dziala hal, jak u nas jest zrobiony po co etc
TODO

\section{x86-64 support} % ciekawostki dotyczace x86_64 etc np real-mode -> protected-mode -> long-mode, segmenty etc
TODO
\subsection{Technical debt}
TODO
\subsection{Common pitfalls}
TODO


% ==================================================================

\chapter{Our Implementation} % bardzo technicznie bardfzo szczegolowo
TODO

\section{Bootloader}
TODO
\section{Interrupts}
TODO
\section{Memory management}
TODO
\section{Timing}
TODO
\section{File System}
TODO
\section{Scheduling}
TODO

% ==================================================================

\chapter{Results}
TODO

\section{User's manual}
TODO

\subsection{Building and running the OS}
TODO

\subsection{Writing own programs}
TODO

\subsection{Libc alkos.h}
TODO

\subsection{Syscalls}
TODO

\section{Example programs}
TODO

\section{Performance Analysis}
TODO

\subsection{KMalloc performance}
TODO

\subsection{KFfree performance}
TODO

\subsection{Context Switch performance}
TODO

\subsection{Syscall performance}
TODO

\subsection{Scheduler tests}
TODO

% ------------------------------- BIBLIOGRAPHY ---------------------------
% LEXICOGRAPHICAL ORDER BY AUTHORS' LAST NAMES
% FOR AMBITIOUS ONES - USE BIBTEX


\begin{thebibliography}{20} % IF YOU HAVE MORE REFERENCES, WRITE THE BIGGER NUMBER

\bibitem[1]{Ktos} A. Author, \emph{Title of a book}, Publisher, year, page--page.
\bibitem[2]{Innyktos} J. Bobkowski, S. Dobkowski, Title of an article, \emph{Magazine X, No. 7}, year, PAGE--PAGE.
\bibitem[3]{B} C. Brink, Power structures, \emph{Algebra Universalis 30(2)}, 1993, 177--216.
\bibitem[4]{H} F. Burris, H. P. Sankappanavar, \emph{A Course of Universal Algebra}, Springer-Verlag, New York, 1981.
\end{thebibliography}
\pagenumbering{gobble}
\thispagestyle{empty}



% ----------------------- LIST OF SYMBOLS AND ABBREVIATIONS ------------------
\chapter*{List of symbols and abbreviations}

\begin{tabular}{cl}
nzw. & nadzwyczajny \\
* & star operator \\
$\widetilde{}$ & tilde 
\end{tabular}
\\
If you don't need it, delete it.
\thispagestyle{empty}


% ----------------------------  LIST OF FIGURES --------------------------------
\listoffigures
\thispagestyle{empty}

% -----------------------------  LIST OF TABLES --------------------------------
\renewcommand{\listtablename}{List of Tables}
\listoftables
\thispagestyle{empty}

\end{document}
